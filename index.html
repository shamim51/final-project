<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Amar Dhaka</title>

    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.3/dist/leaflet.css"
    integrity="sha256-kLaT2GOSpHechhsozzB+flnD+zUyjE2LlfWPgU04xyI="
    crossorigin=""/>

        <!-- Make sure you put this AFTER Leaflet's CSS -->
    <script src="https://unpkg.com/leaflet@1.9.3/dist/leaflet.js"
    integrity="sha256-WBkoXOwTeyKclOHuWtc+i2uENFpDZ9YPdf5Hf+D7ewM="
    crossorigin=""></script>

    <style>
        #map { height: 560px; }
    </style>

</head>
<body>
    <div id="map"></div>

</body>
<script>
    var map = L.map('map').setView([23.7946708, 90.2683664], 13);
    L.tileLayer('https://tile.openstreetmap.org/{z}/{x}/{y}.png',
    {maxZoom: 19, attribution: '&copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a>'}).addTo(map);

    navigator.geolocation.watchPosition(success, error);

    let marker, circle;

    function success(pos){
        const lat = pos.coords.latitude;
        console.log(lat);
        
        const lng = pos.coords.longitude;
        console.log(lng);
        const accuracy = pos.coords.accuracy;

        if(marker){
            map.removeLayer(marker);
            map.removeLayer(circle);
        }
        marker = L.marker([lat, lng]).addTo(map);
        circle = L.circle([lat, lng], {radius : accuracy});

        map.fitBounds(circle.getBounds())
    }

    function error(err){
        if(err.code === 1){
            alert("please allow location access");
        }
        else{
            alert("can't get final location");
        }


    }

    var greenIcon = L.icon({
    iconUrl: 'leaf-green.png',
    shadowUrl: 'leaf-shadow.png',

    iconSize:     [38, 95], // size of the icon
    shadowSize:   [50, 64], // size of the shadow
    iconAnchor:   [22, 94], // point of the icon which will correspond to marker's location
    shadowAnchor: [4, 62],  // the same for the shadow
    popupAnchor:  [-3, -76] // point from which the popup should open relative to the iconAnchor
    });

    L.marker([23.79, 90.26], {icon: greenIcon}).addTo(map);
    
    var geojesonF = {
  "type": "FeatureCollection",
  "features": [
    {
      "type": "Feature",
      "properties": {},
      "geometry": {
        "coordinates": [
          [
            90.4780844838561,
            23.83707276804246
          ],
          [
            90.47248813158649,
            23.842944399708045
          ],
          [
            90.4726527301832,
            23.845804841882924
          ],
          [
            90.47462791333754,
            23.851073912234327
          ],
          [
            90.47528630772234,
            23.852579321560384
          ],
          [
            90.47512170912563,
            23.857396513878754
          ],
          [
            90.4767676950865,
            23.861310350755545
          ],
          [
            90.47857827964418,
            23.86326722484995
          ],
          [
            90.48005966700833,
            23.865073543925845
          ],
          [
            90.48532682208446,
            23.869589231392183
          ],
          [
            90.48516222348775,
            23.871696498317704
          ],
          [
            90.4901001813725,
            23.872900635447195
          ],
          [
            90.49355675189105,
            23.87440579110951
          ],
          [
            90.49487354066059,
            23.87365321546588
          ],
          [
            90.49487354066059,
            23.87139546228518
          ],
          [
            90.49734251960092,
            23.870943906924467
          ],
          [
            90.50014069573467,
            23.872298568281934
          ],
          [
            90.4991531041585,
            23.868535585068358
          ],
          [
            90.50326806906179,
            23.868084019732834
          ],
          [
            90.50392646344665,
            23.870642869142088
          ],
          [
            90.50425566063791,
            23.872900635447195
          ],
          [
            90.50606624519548,
            23.874255276331183
          ],
          [
            90.50935821711732,
            23.87455630571378
          ],
          [
            90.51232099184779,
            23.874104761377836
          ],
          [
            90.51297938623253,
            23.872900635447195
          ],
          [
            90.51199179465647,
            23.87139546228518
          ],
          [
            90.51166259746299,
            23.86973975159529
          ],
          [
            90.5139669778087,
            23.868385063464473
          ],
          [
            90.51544836517502,
            23.86642826669997
          ],
          [
            90.51643595675108,
            23.864621966518925
          ],
          [
            90.51906953429022,
            23.860407168126088
          ],
          [
            90.52022172446306,
            23.85784811647592
          ],
          [
            90.52219690761524,
            23.856643839385
          ],
          [
            90.52499508374899,
            23.856041696641228
          ],
          [
            90.53042683742189,
            23.856192232590047
          ],
          [
            90.53306041495887,
            23.856041696641228
          ],
          [
            90.53470640091979,
            23.8546868652366
          ],
          [
            90.53552939390124,
            23.85272986153177
          ],
          [
            90.53585859109268,
            23.850772828270365
          ],
          [
            90.5361877882861,
            23.84836413137849
          ],
          [
            90.53552939390124,
            23.845804841882924
          ],
          [
            90.53865676722847,
            23.843998254168326
          ],
          [
            90.54194873915026,
            23.843847704055108
          ],
          [
            90.54194873915026,
            23.842041089066086
          ],
          [
            90.54359472511118,
            23.83857833997071
          ],
          [
            90.54359472511118,
            23.835868297914544
          ],
          [
            90.54112574616875,
            23.833308761748583
          ],
          [
            90.52960384444043,
            23.8339110100968
          ],
          [
            90.52252610480872,
            23.83647053437639
          ],
          [
            90.51265018904127,
            23.837825556191618
          ],
          [
            90.50014069573467,
            23.836771651559005
          ],
          [
            90.48417463191163,
            23.837825556191618
          ],
          [
            90.47775528666267,
            23.837223326022468
          ]
        ],
        "type": "LineString"
      }
    }
  ]
}
    var geojsonFeature = {
    "type": "FeatureCollection",
    "features": [
        {
        "type": "Feature",
        "properties": {},
        "geometry": {
            "coordinates": [
            [
            [
              90.38397008768368,
              23.874082554430345
            ],
            [
              90.3840317610127,
              23.869331075213097
            ],
            [
              90.39097001040591,
              23.86948617086071
            ],
            [
              90.39080040875558,
              23.87419534711853
            ],
            [
              90.38397008768368,
              23.874082554430345
            ]
            ]
            ],
            "type": "Polygon"
        }
        }
    ]
    }
    L.geoJSON(geojsonFeature).addTo(map);
    L.geoJSON(geojesonF).addTo(map);
</script>

</html>